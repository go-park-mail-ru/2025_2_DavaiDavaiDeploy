syntax = "proto3";
package films;
option go_package = "./internal/pkg/films/delivery/grpc/gen/;gen";

service Films {
  rpc GetPromoFilm(EmptyRequest) returns (GetPromoFilmResponse) {}
  rpc GetFilms(GetFilmsRequest) returns (GetFilmsResponse) {}
  rpc GetFilmsForCalendar(GetFilmsForCalendarRequest) returns (GetFilmsForCalendarResponse) {}
  rpc GetFilm(GetFilmRequest) returns (GetFilmResponse) {}
  rpc GetFilmFeedbacks(GetFilmFeedbacksRequest) returns (GetFilmFeedbacksResponse) {}
  rpc SendFeedback(SendFeedbackRequest) returns (SendFeedbackResponse) {}
  rpc SetRating(SetRatingRequest) returns (SetRatingResponse) {}
  rpc SiteMap(EmptyRequest) returns (SiteMapResponse) {}
  
  rpc GetGenre(GetGenreRequest) returns (GetGenreResponse) {}
  rpc GetGenres(GetGenresRequest) returns (GetGenresResponse) {}
  rpc GetFilmsByGenre(GetFilmsByGenreRequest) returns (GetFilmsByGenreResponse) {}
  
  rpc GetActor(GetActorRequest) returns (GetActorResponse) {}
  rpc GetFilmsByActor(GetFilmsByActorRequest) returns (GetFilmsByActorResponse) {}
  rpc ValidateUser(ValidateUserRequest) returns (ValidateUserResponse) {}

  rpc SaveFilm(SaveFilmRequest) returns (EmptyResponse) {}
  rpc RemoveFilm(RemoveFilmRequest) returns (EmptyResponse) {};
}

message SaveFilmRequest {
  string user_id = 1;
  string film_id = 2;
}

message RemoveFilmRequest {
  string user_id = 1;
  string film_id = 2;
}

message EmptyResponse {}

message EmptyRequest {}

message GetPromoFilmResponse {
  string id = 1;
  string image = 2;
  string title = 3;
  double rating = 4;
  string short_description = 5;
  int32 year = 6;
  string genre = 7;
  int32 duration = 8;
}

message GetFilmsRequest {
  Pager pager = 1;
}

message GetFilmsResponse {
  repeated MainPageFilm films = 1;
}

message GetFilmsForCalendarRequest {
  Pager pager = 1;
  string user_id = 2;
}

message GetFilmsForCalendarResponse {
  repeated FilmInCalendar films = 1;
}

message GetFilmRequest {
  string film_id = 1;
  string user_id = 2;
}

message GetFilmResponse {
  string id = 1;
  string title = 2;
  optional string original_title = 3;
  string cover = 4;
  string poster = 5;
  string genre = 6;
  string short_description = 7;
  string description = 8;
  string age_category = 9;
  int32 budget = 10;
  int32 worldwide_fees = 11;
  optional string trailer_url = 12;
  int32 number_of_ratings = 13;
  int32 year = 14;
  double rating = 15;
  string country = 16;
  optional string slogan = 17;
  int32 duration = 18;
  optional string image1 = 19;
  optional string image2 = 20;
  optional string image3 = 21;
  repeated Actor actors = 22;
  bool is_reviewed = 23;
  optional int32 user_rating = 24;
  string genre_id = 25;
  bool is_liked = 26;
}

message GetFilmFeedbacksRequest {
  string film_id = 1;
  Pager pager = 2;
  string user_id = 3;
}

message GetFilmFeedbacksResponse {
  repeated FilmFeedback feedbacks = 1;
}

message SendFeedbackRequest {
  string film_id = 1;
  string user_id = 2; 
  FilmFeedbackInput feedback = 3;
}

message SendFeedbackResponse {
  FilmFeedback feedback = 1;
}

message SetRatingRequest {
  string film_id = 1;
  string user_id = 2; 
  FilmRatingInput rating_input = 3;
}

message SetRatingResponse {
  FilmFeedback feedback = 1;
}

message SiteMapResponse {
  Urlset urlset = 1;
}

message GetGenreRequest {
  string genre_id = 1;
}

message GetGenreResponse {
  Genre genre = 1;
}

message GetGenresRequest {
  Pager pager = 1;
}

message GetGenresResponse {
  repeated Genre genres = 1;
}

message GetFilmsByGenreRequest {
  string genre_id = 1;
  Pager pager = 2;
}

message GetFilmsByGenreResponse {
  repeated MainPageFilm films = 1;
}

message GetActorRequest {
  string actor_id = 1;
}

message GetActorResponse {
  ActorPage actor = 1;
}

message GetFilmsByActorRequest {
  string actor_id = 1;
  Pager pager = 2;
}

message GetFilmsByActorResponse {
  repeated MainPageFilm films = 1;
}

message Pager {
  int32 count = 1;
  int32 offset = 2;
}


message MainPageFilm {
  string id = 1;
  string cover = 2;
  string title = 3;
  double rating = 4;
  int32 year = 6;
  string genre = 7;
}

message FilmFeedback {
  string id = 1;
  string user_id = 2;
  string film_id = 3;
  optional string title = 4;
  optional string text = 5;
  int32 rating = 6;
  string created_at = 7;
  string updated_at = 8;
  string user_login = 9;
  string user_avatar = 10;
  bool is_mine = 11;
  double new_film_rating = 12;
}

message FilmFeedbackInput {
  string title = 1;
  string text = 2;
  int32 rating = 3;
}

message FilmRatingInput {
  int32 rating = 1;
}

message Urlset {
  string xmlns = 1;
  repeated URLItem url = 2;
}

message URLItem {
  string loc = 1;
  double priority = 2;
}

message Genre {
  string id = 1;
  string name = 2;
  string description = 3;
  string icon = 4;
}

message ActorPage {
  string id = 1;
  string russian_name = 2;
  optional string original_name = 3;
  string photo = 4;
  int32 height = 5;
  string birth_date = 6;
  int32 age = 7;
  string zodiac_sign = 8;
  string birth_place = 9;
  string marital_status = 10;
  int32 films_number = 11;
}

message Actor {
  string id = 1;
  string russian_name = 2;
  optional string original_name = 3;
  string photo = 4;
  int32 height = 5;
  string birth_date = 6;
  optional string death_date = 7;
  string zodiac_sign = 8;
  string birth_place = 9;
  string marital_status = 10;
}

message ValidateUserRequest {
  string token = 1;
}

message ValidateUserResponse {
  string ID = 1;       
  int32 Version = 2;  
  string Login = 3;
  string Avatar = 4;
}

message FilmInCalendar {
  string ID = 1; 
  string Cover = 2;
  string Title = 3;
  optional string OriginalTitle = 4;
  string ShortDescription = 5;
  string ReleaseDate = 6;
  bool IsLiked = 7;
}